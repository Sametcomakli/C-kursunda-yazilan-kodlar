#include "array.h"
#include "nutility.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>




//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------


static int mycmp(const void* vp1, const void* vp2)
{
	return *(const int*)vp1 - *(const int*)vp2;
}


//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------


void print_array(const int* p, size_t size)
{
	for (size_t i = 0; i < size; ++i) {
		if (i && i % 20 == 0)
			printf("\n");
		printf("%3d ", p[i]);
	}
	dline();
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

void set_random_array(int* p, size_t size)
{
	while (size--)
		*p++ = rand() % 1000;
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------


void set_random_array_range(int* p, size_t size, int low, int high)
{
	while (size--) {
		*p++ = rand() % (high - low + 1) + low;
	}
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

void copy_array(int* pdest, const int* psource, size_t n)
{
	while (n--)
		*pdest++ = *psource++;
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

void reverse_array(int* p, size_t size)
{
	for (size_t i = 0; i < size / 2; ++i)
		swap(p + i, p + size - 1 - i);
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

void sort_array(int* p, size_t size)
{
	for (size_t i = 0; i < size - 1; ++i) {
		for (size_t k = 0; k < size - 1 - i; ++k) {
			if (p[k] > p[k + 1]) {
				swap(p + k, p + k + 1);
			}
		}
	}
}


//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

int* get_array_max(const int* p, size_t size)
{
	const int* ptr_max = p;

	for (size_t i = 1; i < size; ++i) {
		if (p[i] > * ptr_max)
			ptr_max = p + i;
	}

	return (int*)ptr_max;  
}


//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

int* get_array_min(const int* p, size_t size)
{
	const int* ptr_min = p;

	for (size_t i = 1; i < size; ++i) {
		if (p[i] < *ptr_min)
			ptr_min = p + i;
	}

	return (int*)ptr_min; 
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

void reverse_copy(int* pdest, const int* psource, size_t n)
{
	pdest += n;

	while (n--)
		*--pdest = *psource++;
}


//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

int* search_val(const int* pa, size_t size, int val)
{
	while (size--) {
		if (*pa == val) {
			return (int*)pa;
		}
		++pa;
	}

	return NULL;
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

double* set_double_array(double* pa, size_t size)
{
	double* ptemp = pa;

	while (size--)
		*pa++ = drand();

	return ptemp;
}

//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------

int get_median(const int* ptr, size_t size)
{
	int retval;
	int* pd = malloc(size * sizeof(int));
	if (!pd) {
		fprintf(stderr, "bellek yetersiz\n");
		exit(EXIT_FAILURE);
	}
	memcpy(pd, ptr, size * sizeof(int));
	qsort(pd, size, sizeof(*pd), &mycmp);

	retval = pd[size / 2];

	free(pd);

	return retval;
}


//----------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------



